# クラシックギターWiki - 画面要件

## 言語切り替え
- 全ページ共通：ヘッダーに言語切り替えボタン（日本語/English）
- デフォルト：日本語
- 設定保存：ローカルストレージ
- 全コンテンツが言語設定に応じて表示切り替え

## 共通要素

### ヘッダー
- ロゴ／サイトタイトル
- 言語切り替えボタン
- 検索ボタン（作曲者検索・楽曲検索へのリンク）
- ログイン状態で：
  - マイページへのリンク
  - ログアウトボタン
- 未ログインで：
  - ログインボタン

### フッター
- Google AdSense広告枠
- サイト情報、利用規約、プライバシーポリシー等へのリンク

---

## ページ一覧

### 1. トップページ（/）
**表示内容**
- サイト説明
- 新着楽曲（最近追加された楽曲）
- 人気の楽曲（お気に入り数順）
- タグ一覧（クリックでタグ検索）

**広告**
- フッター広告

---

### 2. 作曲者検索ページ（/persons/search）
**検索フォーム**
- テキスト入力フィールド
- 検索ボタン

**検索結果表示**
- 文字列検索の場合：
  - **主表示**：ヒットした名称
  - **副表示**：現在の言語設定に応じたメイン表記（小さく・グレー）
- 各結果は作曲者詳細ページへのリンク

**広告**
- フッター広告

---

### 3. 楽曲検索ページ（/pieces/search）
**検索フォーム**
- テキスト入力フィールド
- タグ絞り込み（複数選択可能）
- 検索ボタン

**検索結果表示**
- 文字列検索の場合：
  - **主表示**：ヒットした名称
  - **副表示**：現在の言語設定に応じたメイン表記（小さく・グレー）
- タグ検索の場合：
  - 常に現在の言語設定に応じたメイン表記で表示
- 各結果：
  - 楽曲名
  - 作曲者名（リンク）
  - 編曲者名（存在する場合、リンク）
  - タグ表示
  - 楽曲詳細ページへのリンク

**広告**
- フッター広告

---

### 4. 作曲者詳細ページ（/persons/[id]）
**表示内容**
- **名称**：
  - メイン表記（言語設定に応じて）
  - 別名リスト
- **基本情報**：
  - 生没年
  - 国籍
  - 経歴（bio）
- **作曲した楽曲一覧**：
  - 楽曲名（言語設定に応じたメイン表記）
  - 楽曲詳細ページへのリンク
- **編曲した楽曲一覧**：
  - 楽曲名（言語設定に応じたメイン表記）
  - 元の作曲者名
  - 楽曲詳細ページへのリンク

**編集機能（ログインユーザー）**
- 「編集を提案」ボタン → 編集フォームへ
- 「名称を追加」ボタン → 名称追加フォームへ

**広告**
- フッター広告

---

### 5. 楽曲詳細ページ（/pieces/[id]）
**表示内容**
- **名称**：
  - メイン表記（言語設定に応じて）
  - 別名リスト
- **基本情報**：
  - 作曲者（リンク）
  - 編曲者（存在する場合、リンク）
  - 親楽曲（組曲の楽章の場合、リンク）
  - 作曲年
  - 楽譜情報
- **タグ**：
  - タグ一覧表示
  - ログインユーザー：タグ追加ボタン
- **子楽曲一覧**（親楽曲の場合）：
  - 各楽章へのリンク
- **YouTube動画**（承認済みのみ）：
  - 埋め込み動画プレーヤー
  - 複数動画がある場合はリスト表示
  - ログインユーザー：動画追加ボタン

**お気に入り機能（ログインユーザー）**
- お気に入り追加／解除ボタン

**編集機能（ログインユーザー）**
- 「編集を提案」ボタン
- 「名称を追加」ボタン

**広告**
- フッター広告
- 5回に1回：ページ表示時にオーバーレイ広告（ローカルストレージでカウント管理）

---

### 6. マイページ（/mypage）
**要ログイン**

**表示内容**
- **お気に入り楽曲一覧**：
  - 楽曲名（言語設定に応じたメイン表記）
  - 作曲者名
  - 編曲者名（存在する場合）
  - タグ表示
  - お気に入り解除ボタン
- **お気に入り内検索**：
  - テキスト検索
  - タグ絞り込み

**サブスク情報**
- 現在のプラン（無料／プレミアム）
- プレミアムプランへのアップグレードボタン（無料会員の場合）
- サブスク管理（プレミアム会員の場合）

**広告**
- 無料会員：フッター広告
- プレミアム会員：広告非表示

---

### 7. ログインページ（/login）
**表示内容**
- 「Googleでログイン」ボタンのみ

**広告**
- なし

---

### 8. 編集フォームページ

#### 8-1. 作曲者新規作成（/persons/create）
**要ログイン**

**フォーム内容**
- 名称（複数入力可能、最低1つ必須）
- 生年
- 没年
- 国籍
- 経歴（textarea）
- 送信ボタン

#### 8-2. 作曲者編集（/persons/[id]/edit）
**要ログイン**

**フォーム内容**
- 生年
- 没年
- 国籍
- 経歴
- 送信ボタン

#### 8-3. 作曲者名称追加（/persons/[id]/add-name）
**要ログイン**

**フォーム内容**
- 名称（テキスト入力）
- 送信ボタン

#### 8-4. 楽曲新規作成（/pieces/create）
**要ログイン**

**フォーム内容**
- 名称（複数入力可能、最低1つ必須）
- 作曲者選択（検索・ドロップダウン）
- 編曲者選択（任意）
- 親楽曲選択（組曲の楽章の場合、任意）
- 作曲年
- 楽譜情報（textarea）
- 送信ボタン

#### 8-5. 楽曲編集（/pieces/[id]/edit）
**要ログイン**

**フォーム内容**
- 作曲者選択
- 編曲者選択
- 親楽曲選択
- 作曲年
- 楽譜情報
- 送信ボタン

#### 8-6. 楽曲名称追加（/pieces/[id]/add-name）
**要ログイン**

**フォーム内容**
- 名称（テキスト入力）
- 送信ボタン

#### 8-7. YouTube動画追加（/pieces/[id]/add-video）
**要ログイン**

**フォーム内容**
- YouTube URL（テキスト入力）
- 送信ボタン

#### 8-8. タグ追加（/pieces/[id]/add-tag）
**要ログイン**

**フォーム内容**
- 既存タグから選択（ドロップダウン）
- または新規タグ作成（テキスト入力）
- 送信ボタン

**広告**
- フッター広告

---

### 9. 管理者ページ（/admin）
**要管理者権限**

**表示内容**
- **承認待ちリスト**：
  - 作曲者新規作成リクエスト
  - 作曲者編集リクエスト
  - 作曲者名称追加リクエスト
  - 作曲者名称削除リクエスト
  - 楽曲新規作成リクエスト
  - 楽曲編集リクエスト
  - 楽曲名称追加リクエスト
  - 楽曲名称削除リクエスト
  - YouTube動画追加リクエスト
- 各リクエスト：
  - リクエスト内容表示
  - 承認ボタン
  - 却下ボタン（却下理由入力フォーム付き）

**広告**
- なし

---

### 10. サブスク登録ページ（/subscribe）
**要ログイン**

**表示内容**
- プレミアムプランの説明
  - 月額500円
  - 広告非表示
- Stripe決済フォーム
- 支払いボタン

**広告**
- なし

---

## レスポンシブ対応
- スマートフォン、タブレット、デスクトップに対応
- ハンバーガーメニュー（モバイル時）

---

## アクセス制御
- **未ログイン**：閲覧のみ
- **ログインユーザー**：閲覧 + 編集リクエスト + お気に入り
- **管理者**：すべて + 承認機能

---

## エラーページ
- 404ページ
- 500ページ
- 403ページ（権限不足）